<script>

    function signin_clicked(event){
        event.preventDefault();
        event.stopPropagation();
        var form = document.getElementById('signin-form');
        form.classList.add('was-validated');

        if (form.checkValidity()){
            Model.signin($('#email').val(), $('#password').val()).done(function (){
                Messages.success.push('Welcome back!')
                navigateTo(event, event.target.href);
            }).fail(function (error){
                Messages.danger.push(`${error.statusText} (${error.status}): ${error.responseJSON.message}`);
                navigateTo(event, '/signin');
            });
        }
    }

</script>

{{> navbar}}
{{> header}}
{{> messages}}

<!-- Main content of the page will be developed here. -->
<main>
    <div class="container">
        <div class="row justify-content-center text-center">
            <div class="col">
                <h1>Sign in</h1><br>
            </div>
        </div>
        
        <form id="signin-form" class="w-75 mx-auto needs-validation" novalidate>
            <div class="form-group">
                <input type="email" class="form-control" id="email" aria-describedby="emailHelp" placeholder="Email address" required="" autofocus=""><br>
                <div class="invalid-feedback">The email field cannot be empty</div>
            </div>

            <div class="form-group">
                <input type="password" class="form-control" id="password" aria-describedby="passwordHelp" placeholder="Password" required="" autofocus=""><br>
                <div class="invalid-feedback">The password field cannot be empty</div>
            </div>
            
            <div class="row justify-content-end text-end">
                <div class="col">
                    <a href="/" class="btn btn-primary" onclick="signin_clicked(event)">Sign in</a>
                </div>
            </div>
        </form>
    </div>
</main>

<footer class="d-flex mt-auto"> <!-- mt-auto to push the footer to the bottom of the screen -->
    <div class="col py-3 mt-4 px-5 border-top text-center">
        <p class="mb-0 text-muted"><small>PainthingsShop created by José Luis Bernáldez Morales for the 2021 Web Engineering and Services course - &copy;&nbsp;PainthingsShop</small></p>
    </div>
</footer>

{{!-- {{> footer}} --}}